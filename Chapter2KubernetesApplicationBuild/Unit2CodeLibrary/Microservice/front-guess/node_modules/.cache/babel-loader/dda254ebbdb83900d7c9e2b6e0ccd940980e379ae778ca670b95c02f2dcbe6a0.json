{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  data() {\n    return {\n      number: null,\n      message: null,\n      attempts: null,\n      gameStatus: \"idle\"\n    };\n  },\n  methods: {\n    async startGame() {\n      this.gameStatus = \"playing\";\n      this.message = null;\n      this.attempts = null;\n    },\n    async submitGuess(guess) {\n      // 从localStorage中获取authToken\n      const authToken = localStorage.getItem(\"authToken\");\n      const ID = localStorage.getItem(\"ID\"); // 获取存储的userID\n\n      if (!authToken) {\n        this.message = \"请先登录\";\n        return;\n      }\n      try {\n        const response = await axios.post(\"http://localhost:8084/game\", {\n          number: guess\n        }, {\n          headers: {\n            Authorization: `Bearer ${authToken}` // 设置请求头\n          },\n\n          params: {\n            userID: userID // 添加这一行\n          }\n        });\n\n        const resData = response.data;\n        if (resData.success) {\n          this.message = resData.message;\n          this.attempts = resData.attempts;\n          this.gameStatus = \"idle\";\n        } else {\n          this.message = resData.message;\n          this.attempts = resData.attempts;\n        }\n      } catch (error) {\n        console.error(\"Error submitting guess:\", error);\n        this.gameStatus = \"error\";\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","number","message","attempts","gameStatus","methods","startGame","submitGuess","guess","authToken","localStorage","getItem","ID","response","post","headers","Authorization","params","userID","resData","success","error","console"],"sources":["/Users/raywong/Documents/CROlordCodelibrary/Chapter2KubernetesApplicationBuild/Unit2CodeLibrary/Microservice/front-guess/src/components/GuessNumberComponent.vue"],"sourcesContent":["<template>\n  <div class=\"container game-container\">\n    <h2>猜数字游戏</h2>\n    <p>在这里玩猜数字游戏！</p>\n    <!-- 游戏的具体实现 -->\n    <div v-if=\"gameStatus === 'idle'\">\n      <button @click=\"startGame\">开始游戏</button>\n    </div>\n    <div v-else-if=\"gameStatus === 'loading'\">\n      <p>加载中...</p>\n    </div>\n    <div v-else-if=\"gameStatus === 'playing'\">\n      <p>猜一个 1 到 100 之间的数字：</p>\n      <input v-model.number=\"number\" type=\"number\" min=\"1\" max=\"100\" />\n      <button @click=\"submitGuess(number)\">提交</button>\n      <p v-if=\"message\">{{ message }}</p>\n      <p v-if=\"attempts\">尝试次数：{{ attempts }}</p>\n    </div>\n    <div v-else-if=\"gameStatus === 'error'\">\n      <p>发生错误，请重试。</p>\n      <button @click=\"startGame\">重试</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      number: null,\n      message: null,\n      attempts: null,\n      gameStatus: \"idle\",\n    };\n  },\n  methods: {\n    async startGame() {\n      this.gameStatus = \"playing\";\n      this.message = null;\n      this.attempts = null;\n    },\n\n    async submitGuess(guess) {\n      // 从localStorage中获取authToken\n      const authToken = localStorage.getItem(\"authToken\");\n      const ID = localStorage.getItem(\"ID\"); // 获取存储的userID\n\n      if (!authToken) {\n        this.message = \"请先登录\";\n        return;\n      }\n\n      try {\n        const response = await axios.post(\"http://localhost:8084/game\", {\n          number: guess,\n        }, {\n          headers: {\n            Authorization: `Bearer ${authToken}` // 设置请求头\n          },\n          params: {\n            userID: userID, // 添加这一行\n          },\n        });\n        const resData = response.data;\n        if (resData.success) {\n          this.message = resData.message;\n          this.attempts = resData.attempts;\n          this.gameStatus = \"idle\";\n        } else {\n          this.message = resData.message;\n          this.attempts = resData.attempts;\n        }\n      } catch (error) {\n        console.error(\"Error submitting guess:\", error);\n        this.gameStatus = \"error\";\n      }\n    },\n  },\n};\n</script>\n\n\n\n<style scoped>\n.container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 50px;\n}\n\n.game-container {\n  max-width: 600px;\n  padding: 40px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\n  border-radius: 12px;\n}\n\nh2 {\n  margin-bottom: 30px;\n  font-size: 32px;\n  color: #4a4a4a;\n}\n\np {\n  font-size: 18px;\n  color: #4a4a4a;\n  margin-bottom: 15px;\n}\n\ninput[type=\"number\"] {\n  width: 100%;\n  padding: 8px 12px;\n  font-size: 18px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  margin-bottom: 20px;\n}\n\nbutton {\n  padding: 12px 24px;\n  background-color: #4caf50;\n  border: none;\n  border-radius: 6px;\n  color: white;\n  font-weight: bold;\n  font-size: 18px;\n  cursor: pointer;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n  transition: background-color 0.2s ease;\n}\n\nbutton:hover {\n  background-color: #45a049;\n}\n\nbutton:active {\n  box-shadow: none;\n  transform: translateY(1px);\n}\n</style>"],"mappings":"AA0BA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE,IAAI;MACZC,OAAO,EAAE,IAAI;MACbC,QAAQ,EAAE,IAAI;MACdC,UAAU,EAAE;IACd,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,SAASA,CAAA,EAAG;MAChB,IAAI,CAACF,UAAS,GAAI,SAAS;MAC3B,IAAI,CAACF,OAAM,GAAI,IAAI;MACnB,IAAI,CAACC,QAAO,GAAI,IAAI;IACtB,CAAC;IAED,MAAMI,WAAWA,CAACC,KAAK,EAAE;MACvB;MACA,MAAMC,SAAQ,GAAIC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;MACnD,MAAMC,EAAC,GAAIF,YAAY,CAACC,OAAO,CAAC,IAAI,CAAC,EAAE;;MAEvC,IAAI,CAACF,SAAS,EAAE;QACd,IAAI,CAACP,OAAM,GAAI,MAAM;QACrB;MACF;MAEA,IAAI;QACF,MAAMW,QAAO,GAAI,MAAMd,KAAK,CAACe,IAAI,CAAC,4BAA4B,EAAE;UAC9Db,MAAM,EAAEO;QACV,CAAC,EAAE;UACDO,OAAO,EAAE;YACPC,aAAa,EAAG,UAASP,SAAU,GAAE;UACvC,CAAC;;UACDQ,MAAM,EAAE;YACNC,MAAM,EAAEA,MAAM,CAAE;UAClB;QACF,CAAC,CAAC;;QACF,MAAMC,OAAM,GAAIN,QAAQ,CAACb,IAAI;QAC7B,IAAImB,OAAO,CAACC,OAAO,EAAE;UACnB,IAAI,CAAClB,OAAM,GAAIiB,OAAO,CAACjB,OAAO;UAC9B,IAAI,CAACC,QAAO,GAAIgB,OAAO,CAAChB,QAAQ;UAChC,IAAI,CAACC,UAAS,GAAI,MAAM;QAC1B,OAAO;UACL,IAAI,CAACF,OAAM,GAAIiB,OAAO,CAACjB,OAAO;UAC9B,IAAI,CAACC,QAAO,GAAIgB,OAAO,CAAChB,QAAQ;QAClC;MACF,EAAE,OAAOkB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/C,IAAI,CAACjB,UAAS,GAAI,OAAO;MAC3B;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}